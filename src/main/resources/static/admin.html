<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión Inventario - Panel Administrador</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/dashboard-informes.css">
    <!-- Chart.js for dashboard charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>Gestión Inventario</h3>
                <p>Navegación</p>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#" data-section="principal" class="active"><i class="fas fa-home"></i> Principal</a></li>
                <li class="has-submenu">
                    <a href="#" class="submenu-toggle">
                        <i class="fas fa-box"></i> Productos <i class="fas fa-chevron-down arrow-icon"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="#" data-section="productos" data-subsection="productos-create">Crear Producto</a>
                        </li>
                        <li><a href="#" data-section="productos" data-subsection="productos-list">Gestión de
                                Inventario</a></li>
                    </ul>
                </li>
                <li class="has-submenu">
                    <a href="#" class="submenu-toggle">
                        <i class="fas fa-user"></i> Proveedores <i class="fas fa-chevron-down arrow-icon"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="#" data-section="proveedores" data-subsection="proveedores-create">Crear
                                Proveedor</a></li>
                        <li><a href="#" data-section="proveedores" data-subsection="proveedores-list">Ver
                                Proveedores</a></li>
                    </ul>
                </li>
                <li class="has-submenu">
                    <a href="#" class="submenu-toggle">
                        <i class="fas fa-shopping-bag"></i> Compras <i class="fas fa-chevron-down arrow-icon"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="#" data-section="compras" data-subsection="compras-create">Registrar Compra</a>
                        </li>
                        <li><a href="#" data-section="compras" data-subsection="compras-list">Ver Compras</a></li>
                    </ul>
                </li>
                <li class="has-submenu">
                    <a href="#" class="submenu-toggle">
                        <i class="fas fa-users"></i> Usuarios <i class="fas fa-chevron-down arrow-icon"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="#" data-section="usuarios" data-subsection="usuarios-create">Registrar Usuario</a>
                        </li>
                        <li><a href="#" data-section="usuarios" data-subsection="usuarios-list">Ver Usuarios</a></li>
                    </ul>
                </li>
                <li class="has-submenu">
                    <a href="#" class="submenu-toggle">
                        <i class="fas fa-shopping-cart"></i> Ventas <i class="fas fa-chevron-down arrow-icon"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="#" data-section="ventas" data-subsection="ventas-create">Registrar Venta</a></li>
                        <li><a href="#" data-section="ventas" data-subsection="ventas-list">Ver Ventas</a></li>
                    </ul>
                </li>
                <li class="has-submenu">
                    <a href="#" class="submenu-toggle">
                        <i class="fas fa-tags"></i> Categorías <i class="fas fa-chevron-down arrow-icon"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="#" data-section="categorias" data-subsection="categorias-create">Crear
                                Categoría</a></li>
                        <li><a href="#" data-section="categorias" data-subsection="categorias-list">Ver Categorías</a>
                        </li>
                    </ul>
                </li>
                <li><a href="#" data-section="informes"><i class="fas fa-chart-bar"></i> Informes</a></li>
                <li><a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Salir</a></li>
            </ul>
        </aside>

        <!-- Banner de éxito para compras -->
        <div id="success-banner" class="success-banner">
            <i class="fas fa-check-circle"></i>
            <span id="success-banner-text">¡Compra registrada exitosamente!</span>
        </div>

        <main class="main-content" tabindex="-1">
            <header class="main-header">
                <div class="header-left">
                    <div class="header-title">
                        <i class="fas fa-file-alt"></i>
                        <h2 id="section-title">Principal</h2>
                    </div>
                </div>
                <div class="user-info">
                    <i class="fas fa-user"></i>
                    <div>
                        <span id="header-user-name">Cargando...</span>
                        <span id="header-user-role">Cargando...</span>
                    </div>
                </div>
            </header>

            <section id="principal-section" class="spa-section">

                <!-- ALERTAS CRÍTICAS -->
                <div class="alerts-section" style="margin-bottom: 30px;">
                    <h3 style="margin-bottom: 15px; color: #333; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-bell" style="color: #dc3545;"></i> Alertas Críticas
                    </h3>
                    <div class="dashboard-stats">
                        <div class="stat-card alert">
                            <div class="stat-icon">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="productos-agotados-count">0</h3>
                                <p>Productos Agotados</p>
                            </div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="stock-bajo-count">0</h3>
                                <p>Productos Bajo Mínimo</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RESUMEN DE HOY -->
                <div class="today-summary" style="margin-bottom: 30px;">
                    <h3 style="margin-bottom: 15px; color: #333; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-chart-line" style="color: #28a745;"></i> Resumen de Hoy
                    </h3>
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon green">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="ventas-hoy-amount">$0.00</h3>
                                <p>Ventas de Hoy</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon blue">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="ventas-hoy-count">0</h3>
                                <p>Cantidad de Ventas</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon purple">
                                <i class="fas fa-cube"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="productos-vendidos-hoy">0</h3>
                                <p>Productos Vendidos</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="low-stock-section">
                    <h3><i class="fas fa-warehouse" style="color: #ff9800;"></i> Productos que necesitan reposición</h3>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>

                                <tr>
                                    <th data-sort-by="producto.nombre" class="sortable">Nombre <i
                                            class="sort-icon fas fa-sort"></i></th>
                                    <th data-sort-by="producto.categoria" class="sortable">Categoría <i
                                            class="sort-icon fas fa-sort"></i></th>
                                    <th>Descripción</th>
                                    <th data-sort-by="stockActual" class="sortable">Stock <i
                                            class="sort-icon fas fa-sort"></i></th>
                                    <th data-sort-by="producto.precio" class="sortable">Precio <i
                                            class="sort-icon fas fa-sort"></i></th>
                                </tr>
                            </thead>
                            <tbody id="low-stock-table-body">
                            </tbody>

                            <tfoot>
                                <tr>
                                    <td colspan="5">
                                        <div class="pagination-controls" style="text-align: right; padding: 10px 0;">
                                            <span id="low-stock-page-info" style="margin-right: 15px;">Página 1 de
                                                1</span>
                                            <button class="btn-outline" id="low-stock-prev-page" disabled>
                                                <i class="fas fa-arrow-left"></i>
                                            </button>
                                            <button class="btn-outline" id="low-stock-next-page">
                                                <i class="fas fa-arrow-right"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

            </section>

            <section id="productos-section" class="spa-section" style="display:none">
                <div class="section-header">
                    <h3>Gestión de Productos</h3>
                    <p>Administra el inventario de productos.</p>
                </div>



                <!-- Subsección: Crear Producto -->
                <div id="productos-create-container" class="subsection-container" style="display: none;">
                    <div class="form-section">
                        <h4>Registrar Nuevo Producto</h4>
                        <form id="product-form" class="product-form" novalidate>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="product-name">Nombre del Producto</label>
                                    <input type="text" id="product-name" name="nombre"
                                        placeholder="Ingrese el nombre del producto">
                                    <div class="error-message" id="name-error"></div>
                                </div>
                                <div class="form-group">
                                    <label for="product-category-search">Categoría</label>
                                    <div class="search-with-add">
                                        <input type="text" id="product-category-search" autocomplete="off"
                                            placeholder="Buscar categoría...">
                                        <button type="button" id="btn-add-categoria" class="btn-icon btn-add-quick"
                                            title="Crear Nueva Categoría">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                    <input type="hidden" id="product-category-id-hidden">
                                    <div class="product-results" id="product-category-results"></div>
                                    <div class="error-message" id="category-error"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="product-description">Descripción</label>
                                <textarea id="product-description" name="descripcion"
                                    placeholder="Descripción del producto"></textarea>
                                <div class="error-message" id="description-error"></div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="product-stock-min">Stock Mínimo</label>
                                    <input type="number" id="product-stock-min" value="5">
                                    <div class="error-message" id="stock-min-error"></div>
                                </div>

                                <div class="form-group">
                                    <label for="product-stock-max">Stock Máximo</label>
                                    <input type="number" id="product-stock-max" value="100">
                                    <div class="error-message" id="stock-max-error"></div>
                                </div>
                            </div>
                            <button type="submit" class="btn-primary" style="margin-top: 20px;">
                                <i class="fas fa-plus"></i>
                                Registrar Producto
                            </button>
                        </form>
                        <p id="form-general-message-producto" class="form-message"></p>
                    </div>
                </div>

                <!-- Subsección: Ver Productos (ahora Gestión de Inventario) -->
                <div id="productos-list-container" class="subsection-container">
                    <div class="table-section">
                        <h4>Gestión de Inventario</h4>

                        <!-- Búsqueda de Productos -->
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 12px 18px; margin: 0 0 15px;">
                            <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                                <!-- Búsqueda -->
                                <div style="flex: 1; min-width: 300px;">
                                    <div style="position: relative;">
                                        <i class="fas fa-search"
                                            style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #666;"></i>
                                        <input type="text" placeholder="Buscar por nombre, categoría o descripción..."
                                            id="product-search-input"
                                            style="width: 100%; padding: 10px 12px 10px 38px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; background: white;">
                                    </div>
                                </div>

                                <!-- Botón Limpiar -->
                                <div style="display: flex; gap: 10px;">
                                    <button type="button" class="btn-outline" id="product-btn-limpiar-busqueda"
                                        style="padding: 10px 16px; font-size: 14px; white-space: nowrap;">
                                        <i class="fas fa-eraser"></i> Limpiar
                                    </button>
                                </div>
                            </div>
                            <!-- Mensaje de error para búsqueda -->
                            <div id="product-search-error" class="error-message"
                                style="margin-top: 10px; display: none;"></div>
                        </div>

                        <div class="table-container-product">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-sort-by="nombre" class="sortable">Nombre <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="categoria" class="sortable">Categoría <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="descripcion" class="sortable">Descripción <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="stock" class="sortable">Stock <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="product-table-body">

                                </tbody>
                            </table>
                        </div>
                        <div class="pagination-controls">
                        </div>
                        <tfoot>
                            <tr>
                                <td colspan="5">
                                    <div class="pagination-controls" style="text-align: right; padding: 10px 0;">
                                        <span id="product-page-info" style="margin-right: 15px;">Página 1 de 1</span>
                                        <button class="btn-outline" id="product-prev-page" disabled>
                                            <i class="fas fa-arrow-left"></i>
                                        </button>
                                        <button class="btn-outline" id="product-next-page">
                                            <i class="fas fa-arrow-right"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tfoot>
                    </div>
                </div>
            </section>

            <!-- Modal de Detalles del Producto -->
            <div id="product-detail-modal" class="modal-overlay" style="display: none;">
                <div class="modal-content modal-large">
                    <div class="modal-header">
                        <h3><i class="fas fa-box"></i> Detalle del Producto</h3>
                        <button class="modal-close" id="product-detail-close">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- Información Básica -->
                        <div class="detail-section">
                            <h4><i class="fas fa-info-circle"></i> Información Básica</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <label>Nombre:</label>
                                    <span id="detail-nombre"></span>
                                </div>
                                <div class="detail-item">
                                    <label>Categoría:</label>
                                    <span id="detail-categoria"></span>
                                </div>
                                <div class="detail-item full-width">
                                    <label>Descripción:</label>
                                    <span id="detail-descripcion"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Información Comercial -->
                        <div class="detail-section">
                            <h4><i class="fas fa-dollar-sign"></i> Información Comercial</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <label>Precio de Venta:</label>
                                    <span id="detail-precio" class="price-highlight"></span>
                                </div>
                                <div class="detail-item">
                                    <label>Fecha de Creación:</label>
                                    <span id="detail-fecha"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Gestión de Stock -->
                        <div class="detail-section">
                            <h4><i class="fas fa-warehouse"></i> Gestión de Stock</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <label>Stock Actual:</label>
                                    <span id="detail-stock-actual" class="stock-highlight"></span>
                                </div>
                                <div class="detail-item">
                                    <label>Stock Mínimo:</label>
                                    <span id="detail-stock-min"></span>
                                </div>
                                <div class="detail-item">
                                    <label>Stock Máximo:</label>
                                    <span id="detail-stock-max"></span>
                                </div>
                                <div class="detail-item">
                                    <label>Estado:</label>
                                    <span id="detail-stock-estado"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn-primary" id="product-detail-edit">
                            <i class="fas fa-edit"></i> Editar Producto
                        </button>
                        <button class="btn-outline" id="product-detail-close-btn">
                            Cerrar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal de Edición del Producto -->
            <div id="product-edit-modal" class="modal-overlay" style="display: none;">
                <div class="modal-content modal-large">
                    <div class="modal-header">
                        <h3><i class="fas fa-edit"></i> Editar Producto</h3>
                        <button class="modal-close" id="product-edit-close">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="product-edit-form" novalidate>
                            <input type="hidden" id="edit-product-id">

                            <div class="form-group">
                                <label for="edit-product-name">Nombre del Producto *</label>
                                <input type="text" id="edit-product-name" placeholder="Nombre del producto">
                                <div class="error-message" id="edit-name-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="edit-product-category-search">Categoría *</label>
                                <input type="text" id="edit-product-category-search" placeholder="Buscar categoría..."
                                    autocomplete="off">
                                <input type="hidden" id="edit-product-category-id-hidden">
                                <div id="edit-product-category-results" class="product-results" style="display: none;">
                                </div>
                                <div class="error-message" id="edit-category-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="edit-product-description">Descripción *</label>
                                <textarea id="edit-product-description" rows="3"
                                    placeholder="Descripción del producto"></textarea>
                                <div class="error-message" id="edit-description-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="edit-product-price">Precio de Venta *</label>
                                <input type="number" id="edit-product-price" placeholder="0.00" step="0.01" min="0">
                                <div class="error-message" id="edit-price-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="edit-product-stock-min">Stock Mínimo *</label>
                                <input type="number" id="edit-product-stock-min" placeholder="0" min="0">
                                <div class="error-message" id="edit-stock-min-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="edit-product-stock-max">Stock Máximo *</label>
                                <input type="number" id="edit-product-stock-max" placeholder="0" min="0">
                                <div class="error-message" id="edit-stock-max-error"></div>
                            </div>

                            <div id="edit-form-message" class="form-message"></div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-primary" id="product-edit-save">
                            <i class="fas fa-save"></i> Guardar Cambios
                        </button>
                        <button type="button" class="btn-outline" id="product-edit-cancel">
                            Cancelar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal de Confirmación de Eliminación -->
            <div id="product-delete-modal" class="modal-overlay" style="display: none;">
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3><i class="fas fa-exclamation-triangle" style="color: #e74c3c;"></i> Confirmar Eliminación
                        </h3>
                        <button class="modal-close" id="product-delete-close">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <input type="hidden" id="delete-product-id">
                        <p style="font-size: 16px; margin-bottom: 15px;">
                            ¿Estás seguro de que deseas eliminar el siguiente producto?
                        </p>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 15px;">
                            <strong id="delete-product-name" style="font-size: 18px; color: #2c3e50;"></strong>
                        </div>
                        <p style="color: #e74c3c; font-weight: bold; margin-bottom: 10px;">
                            <i class="fas fa-exclamation-circle"></i> Esta acción no se puede deshacer
                        </p>
                        <div id="delete-form-message" class="form-message"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn-primary" id="product-delete-confirm"
                            style="background-color: #e74c3c;">
                            <i class="fas fa-trash"></i> Sí, Eliminar
                        </button>
                        <button type="button" class="btn-outline" id="product-delete-cancel">
                            Cancelar
                        </button>
                    </div>
                </div>
            </div>

            <section id="proveedores-section" class="spa-section" style="display:none">
                <div class="section-header">
                    <h2>Gestión de Proveedores</h2>
                    <p>Administra tus proveedores.</p>
                </div>

                <!-- Subsección: Crear Proveedor -->
                <div id="proveedores-create-container" class="subsection-container" style="display: none;">
                    <div class="form-section">
                        <h4>Registrar Nuevo Proveedor</h4>
                        <form id="proveedor-form" class="supplier-form" novalidate>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="proveedorNombre">Nombre del Proveedor</label>
                                    <input type="text" id="proveedorNombre" name="nombre"
                                        placeholder="Nombre proveedor">
                                    <div class="error-message" id="errorNombre"></div>
                                </div>
                                <div class="form-group">
                                    <label for="proveedorTelefono">Teléfono</label>
                                    <input type="text" id="proveedorTelefono" name="telefono" placeholder="123456789">
                                    <div class="error-message" id="errorTelefono"></div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="proveedorEmail">Email</label>
                                    <input type="email" id="proveedorEmail" name="email"
                                        placeholder="email@ejemplo.com">
                                    <div class="error-message" id="errorEmail"></div>
                                </div>
                                <div class="form-group">
                                    <label for="proveedorDireccion">Dirección</label>
                                    <input type="text" id="proveedorDireccion" name="direccion"
                                        placeholder="Dirección completa">
                                    <div class="error-message" id="errorDireccion"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="proveedorProductosSelect">Productos que Ofrece</label>

                                <div id="productos-multi-select-container" class="custom-multi-select-container">

                                    <div id="tags-container" class="tags-container">

                                    </div>

                                    <input type="text" id="productos-select-input" class="custom-select-input"
                                        placeholder="Buscar y seleccionar productos...">

                                </div>
                                <div id="productos-options-container" class="options-container">
                                </div>
                                <select id="proveedorProductosSelect" name="productosIds" multiple>
                                </select>
                                <div class="error-message" id="proveedorProductosError"></div>
                            </div>
                            <button type="submit" class="btn-primary" style="margin-top: 20px;">
                                <i class="fas fa-plus"></i>
                                Registrar Proveedor
                            </button>
                        </form>
                        <p id="form-general-message-proveedor" class="form-message"></p>
                    </div>
                </div>

                <!-- Subsección: Ver Proveedores -->
                <div id="proveedores-list-container" class="subsection-container">
                    <div class="table-section">
                        <h4>Proveedores Registrados</h4>
                        <div class="table-container table-container-proveedor">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-sort-by="nombre" class="sortable">Nombre <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="email" class="sortable">Email <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="telefono" class="sortable">Teléfono <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th>Productos</th>
                                        <th data-sort-by="direccion" class="sortable">Dirección <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="proveedor-tabla">
                                    <!-- Se llena con JS -->
                                </tbody>
                            </table>
                            <div class="pagination-controls">
                            </div>
                            <div class="pagination-controls">
                            </div>
                            <tfoot>
                                <tr>
                                    <td colspan="6">
                                        <div class="pagination-controls" style="text-align: right; padding: 10px 0;">
                                            <span id="proveedor-page-info" style="margin-right: 15px;">Página 1 de
                                                1</span>
                                            <button class="btn-outline" id="proveedor-prev-page" disabled>
                                                <i class="fas fa-arrow-left"></i>
                                            </button>
                                            <button class="btn-outline" id="proveedor-next-page">
                                                <i class="fas fa-arrow-right"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tfoot>
                        </div>
                    </div>
                </div>
            </section>

            <section id="compras-section" class="spa-section" style="display:none">
                <div class="section-header">
                    <h2>Gestión de Compras</h2>
                    <p>Administra tus compras.</p>
                </div>

                <!-- Subsección: Registrar Compra -->
                <div id="compras-create-container" class="subsection-container" style="display: none;">
                    <div class="form-section">
                        <h4>Registrar Nueva Compra</h4>
                        <form id="compra-form" class="sale-form" novalidate>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="compra-fecha">Fecha de Compra</label>
                                    <input type="date" id="compra-fecha" value="">
                                    <div class="error-message" id="errorCompraFecha"></div>
                                </div>
                                <div class="form-group">
                                    <label for="compra-proveedor-search">Proveedor</label>

                                    <div class="product-search-container">
                                        <input type="text" id="compra-proveedor-search"
                                            placeholder="Buscar proveedor por nombre..." class="product-search-input"
                                            autocomplete="off">
                                        <input type="hidden" id="compra-proveedor-id-hidden">
                                        <div id="compra-proveedor-results" class="product-results"
                                            style="display: none;">
                                        </div>
                                    </div>

                                    <div class="error-message" id="errorCompraProveedor"></div>
                                </div>
                            </div>

                            <div class="product-selection">
                                <h5><i class="fas fa-box"></i> Detalle de la Compra</h5>

                                <!-- Fila 1: Producto y Cantidad -->
                                <div class="form-row">
                                    <div class="form-group" style="flex: 3;">
                                        <label for="compra-producto-search">Producto</label>

                                        <div class="product-search-container">
                                            <input type="text" id="compra-producto-search"
                                                placeholder="Buscar producto por nombre..." class="product-search-input"
                                                autocomplete="off">
                                            <input type="hidden" id="compra-producto-id-hidden">
                                            <div id="compra-producto-results" class="product-results"
                                                style="display: none;">
                                            </div>
                                        </div>

                                        <div class="error-message" id="errorCompraProducto"></div>
                                    </div>

                                    <div class="form-group" style="flex: 1;">
                                        <label for="compra-cantidad">Cantidad</label>
                                        <input type="number" id="compra-cantidad" value="1" min="1">
                                        <div class="error-message" id="errorCompraCantidad"></div>
                                    </div>
                                </div>

                                <!-- Fila 2: Precios -->
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="compra-costo-unit">Precio de Costo (Unit.)</label>
                                        <input type="text" id="compra-costo-unit" placeholder="0.00">
                                        <div class="error-message" id="errorCompraCosto"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="compra-venta-unit">Nuevo Precio Venta (Unit.)</label>
                                        <input type="text" id="compra-venta-unit" placeholder="0.00">
                                        <div class="error-message" id="errorCompraVenta"></div>
                                    </div>
                                </div>

                                <button type="button" id="add-detalle-btn" class="btn-secondary"
                                    style="margin-top: 10px;">
                                    <i class="fas fa-plus"></i>
                                    Agregar Producto al Detalle
                                </button>
                                <div class="error-message" id="errorDetalleGeneral"></div>

                                <div class="table-container" style="margin-top: 20px;">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Producto</th>
                                                <th>Cantidad</th>
                                                <th>Costo Unit.</th>
                                                <th>Precio Venta</th>
                                                <th>Subtotal</th>
                                                <th>Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="compra-detalle-temporal">
                                        </tbody>
                                    </table>
                                </div>
                                <div class="total-section" style="text-align: right;">
                                    <h4 id="compra-total-display">Total Compra: $0.00</h4>
                                </div>
                            </div>

                            <div style="text-align: right;">
                                <button type="submit" class="btn-primary" style="margin-top: 10px;">
                                    <i class="fas fa-plus"></i>
                                    Registrar Compra
                                </button>
                                <button type="button" class="btn-outline" id="limpiar-form-compra"
                                    style="margin-top: 10px; margin-left: 10px;">
                                    <i class="fas fa-eraser"></i>
                                    Limpiar Formulario
                                </button>
                            </div>
                        </form>
                        <p id="form-general-message-compra" class="form-message"></p>
                    </div>
                </div>

                <!-- Subsección: Ver Compras -->
                <div id="compras-list-container" class="subsection-container">
                    <div class="table-section">
                        <h4>Compras Registradas</h4>

                        <!-- Búsqueda y Filtros -->
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 12px 18px; margin: 0 0 15px;">
                            <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                                <!-- Búsqueda -->
                                <div style="flex: 1; min-width: 300px;">
                                    <div style="position: relative;">
                                        <i class="fas fa-search"
                                            style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #666;"></i>
                                        <input type="text" placeholder="Buscar por proveedor o producto..."
                                            id="compras-search-input"
                                            style="width: 100%; padding: 10px 12px 10px 38px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; background: white;">
                                    </div>
                                </div>

                                <!-- Separador visual -->
                                <div style="height: 35px; width: 1px; background: #dee2e6;"></div>

                                <!-- Filtros de Fecha -->
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-calendar" style="color: #666;"></i>
                                    <input type="date" id="compras-fecha-inicio"
                                        style="padding: 10px 12px; font-size: 14px; border: 1px solid #ddd; border-radius: 6px; background: white;">
                                    <span style="color: #666;">→</span>
                                    <input type="date" id="compras-fecha-fin"
                                        style="padding: 10px 12px; font-size: 14px; border: 1px solid #ddd; border-radius: 6px; background: white;">
                                </div>

                                <!-- Separador visual -->
                                <div style="height: 35px; width: 1px; background: #dee2e6;"></div>

                                <!-- Botones de Acción -->
                                <div style="display: flex; gap: 10px;">
                                    <button type="button" class="btn-primary" id="compras-btn-filtrar"
                                        style="padding: 10px 16px; font-size: 14px; white-space: nowrap;">
                                        <i class="fas fa-search"></i> Buscar
                                    </button>
                                    <button type="button" class="btn-outline" id="compras-btn-limpiar-filtro"
                                        style="padding: 10px 16px; font-size: 14px; white-space: nowrap;">
                                        <i class="fas fa-eraser"></i> Limpiar
                                    </button>
                                    <button type="button" class="btn-primary" id="compras-btn-exportar-pdf"
                                        style="padding: 10px 16px; font-size: 14px; white-space: nowrap;">
                                        <i class="fas fa-file-pdf"></i> PDF
                                    </button>
                                </div>
                            </div>
                            <!-- Mensaje de error para filtros -->
                            <div id="compras-filtro-error" class="error-message"
                                style="margin-top: 10px; display: none;"></div>
                        </div>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-sort-by="fecha" class="sortable">Fecha <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="proveedor.nombre" class="sortable">Proveedor <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th>Productos</th>
                                        <th>Costo Unit.</th>
                                        <th data-sort-by="total" class="sortable">Total <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="compras-historial-tabla-body">
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="6">
                                            <div class="pagination-controls"
                                                style="text-align: right; padding: 10px 0;">
                                                <span id="compras-page-info" style="margin-right: 15px;">Página 1 de
                                                    1</span>
                                                <button class="btn-outline" id="compras-prev-page" disabled>
                                                    <i class="fas fa-arrow-left"></i>
                                                </button>
                                                <button class="btn-outline" id="compras-next-page">
                                                    <i class="fas fa-arrow-right"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="usuarios-section" class="spa-section" style="display:none">
                <div class="section-header">
                    <h2>Gestión de Usuarios</h2>
                    <p>Administra los usuarios del sistema.</p>
                </div>

                <!-- Subsección: Registrar Usuario -->
                <div id="usuarios-create-container" class="subsection-container" style="display: none;">
                    <div class="form-section">
                        <h4>Registrar Nuevo Usuario</h4>
                        <form id="user-form" class="product-form" novalidate>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="user-nombre">Nombre</label>
                                    <input type="text" id="user-nombre" placeholder="Ingrese el nombre">
                                    <div class="error-message" id="error-user-nombre"></div>
                                </div>
                                <div class="form-group">
                                    <label for="user-apellido">Apellido</label>
                                    <input type="text" id="user-apellido" placeholder="Ingrese el apellido">
                                    <div class="error-message" id="error-user-apellido"></div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="user-email">Email</label>
                                    <input type="email" id="user-email" placeholder="correo@ejemplo.com">
                                    <div class="error-message" id="error-user-email"></div>
                                </div>
                                <div class="form-group">
                                    <label for="user-rol">Rol</label>
                                    <select id="user-rol">
                                    </select>
                                    <div class="error-message" id="error-user-rol"></div>
                                </div>
                            </div>

                            <class="form-row">
                                <div class="form-group">
                                    <label for="user-password">Contraseña</label>
                                    <input type="password" id="user-password" placeholder="Ingrese la contraseña">
                                    <div class="error-message" id="error-user-password"></div>
                                </div>

                                <div class="form-group">
                                    <label for="user-confirm-password">Confirmar Contraseña</label>
                                    <input type="password" id="user-confirm-password"
                                        placeholder="Confirme la contraseña">
                                    <div class="error-message" id="error-user-confirm-password"></div>
                                </div>
                                <button type="submit" class="btn-primary" style="margin-top: 20px;">
                                    <i class="fas fa-plus"></i>
                                    Registrar Usuario
                                </button>

                        </form>
                        <p id="form-general-message-usuario" class="form-message"></p>
                    </div>
                </div>

                <!-- Subsección: Ver Usuarios -->
                <div id="usuarios-list-container" class="subsection-container">
                    <div class="table-section">
                        <h4>Usuarios Registrados</h4>
                        <div class="table-container-usuarios">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-sort-by="nombre" class="sortable">Nombre <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="apellido" class="sortable">Apellido <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="email" class="sortable">Email <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="rol.idRol" class="sortable">Rol <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="user-table-body">
                                </tbody>
                            </table>

                            <div class="pagination-controls" style="text-align: right; padding: 10px 0;">
                                <span id="user-page-info" style="margin-right: 15px;">Página 1 de 1</span>
                                <button class="btn-outline" id="user-prev-page" disabled>
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <button class="btn-outline" id="user-next-page">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>




            <section id="ventas-section" class="spa-section" style="display:none">
                <div class="section-header">
                    <h2>Gestión de Ventas</h2>
                    <p>Administra las ventas del sistema.</p>
                </div>

                <!-- Subsección: Registrar Venta -->
                <div id="ventas-create-container" class="subsection-container" style="display: none;">
                    <div class="form-section">
                        <h4>Registrar Nueva Venta</h4>
                        <form class="sale-form" id="venta-form">

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fecha-venta">Fecha</label>
                                    <input type="date" id="fecha-venta" readonly style="cursor: not-allowed;">
                                    <div class="error-message" id="errorFechaVenta"></div>
                                </div>

                                <div class="form-group">
                                    <label for="venta-cliente-search">Buscar Cliente (Nombre, Apellido o DNI)</label>

                                    <div class="search-with-add">
                                        <input type="text" id="venta-cliente-search" autocomplete="off"
                                            placeholder="Buscar cliente existente...">

                                        <button type="button" id="btn-add-cliente" class="btn-icon btn-add-quick"
                                            title="Crear Nuevo Cliente">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>

                                    <input type="hidden" id="venta-cliente-id-hidden">
                                    <div class="product-results" id="venta-cliente-results"></div>
                                    <span class="error-message" id="errorVentaCliente"></span>
                                </div>
                            </div>

                            <div class="product-selection">
                                <h5><i class="fas fa-box"></i> Selección de Producto</h5>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="product-search">Producto</label>
                                        <div class="product-search-container">
                                            <input type="text" id="product-search"
                                                placeholder="Buscar producto por nombre..."
                                                class="product-search-input">
                                            <div id="product-results" class="product-results" style="display: none;">
                                            </div>
                                        </div>
                                        <div class="error-message" id="errorProducto"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="cantidad-producto">Cantidad</label>
                                        <input type="number" id="cantidad-producto" value="1" min="1">
                                        <div class="error-message" id="errorCompraCantidad"></div>
                                    </div>
                                </div>
                                <button type="button" id="btn-agregar-producto" class="btn-secondary">
                                    <i class="fas fa-plus"></i>
                                    Agregar Producto a la Venta
                                </button>
                                <div class="error-message" id="errorDetalleGeneral"></div>

                                <div class="table-container" style="margin-top: 20px;">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Producto</th>
                                                <th>Cantidad</th>
                                                <th>Precio Unit.</th>
                                                <th>Subtotal</th>
                                                <th>Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="venta-detalle-temporal">
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="total-section" style="text-align: right;">
                                <h4 id="total-venta">$ Total: $0.00</h4>
                            </div>

                            <!-- Sección: Método de Pago -->
                            <div class="payment-section"
                                style="margin: 20px 0; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #667eea;">
                                <h5 style="margin-bottom: 15px; color: #333;">
                                    <i class="fas fa-credit-card"></i> Método de Pago
                                </h5>

                                <div class="form-group">
                                    <label for="metodo-pago">Seleccionar Método *</label>
                                    <select id="metodo-pago" class="form-control" required>
                                        <option value="">-- Seleccione un método --</option>
                                    </select>
                                    <div class="error-message" id="errorMetodoPago"></div>
                                </div>

                                <!-- Campos para Tarjeta/Transferencia (ocultos por defecto) -->
                                <div id="campos-datos-extra" style="display: none; margin-top: 15px;">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="nro-transaccion">Nro. de Transacción/Tarjeta *</label>
                                            <input type="text" id="nro-transaccion" class="form-control"
                                                placeholder="Ingrese número de transacción">
                                            <div class="error-message" id="errorNroTransaccion"></div>
                                        </div>
                                    </div>

                                    <!-- Campos específicos para Tarjeta -->
                                    <div id="campos-tarjeta" style="display: none;">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="tipo-tarjeta">Tipo de Tarjeta</label>
                                                <select id="tipo-tarjeta" class="form-control">
                                                    <option value="">-- Seleccione --</option>
                                                    <option value="Débito">Débito</option>
                                                    <option value="Crédito">Crédito</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="ultimos-digitos">Últimos 4 Dígitos</label>
                                                <input type="text" id="ultimos-digitos" class="form-control"
                                                    maxlength="4" placeholder="1234">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div style="text-align: right;">
                                <button type="submit" class="btn-primary" id="btn-registrar-venta">
                                    <i class="fas fa-plus"></i>
                                    Registrar Venta
                                </button>
                            </div>
                        </form>
                        <p id="form-general-message-venta" class="form-message"></p>
                    </div>
                </div>

                <div id="ventas-list-container" class="subsection-container">
                    <div class="table-section">
                        <h4>Ventas Registradas</h4>
                        <p>Historial de ventas realizadas</p>

                        <!-- Búsqueda y Filtros -->
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 12px 18px; margin: 0 0 15px;">
                            <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                                <!-- Búsqueda -->
                                <div style="flex: 1; min-width: 300px;">
                                    <div style="position: relative;">
                                        <i class="fas fa-search"
                                            style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #666;"></i>
                                        <input type="text" placeholder="Buscar por cliente, producto o vendedor..."
                                            id="ventas-search-input"
                                            style="width: 100%; padding: 10px 12px 10px 38px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; background: white;">
                                    </div>
                                </div>

                                <!-- Separador visual -->
                                <div style="height: 35px; width: 1px; background: #dee2e6;"></div>

                                <!-- Filtros de Fecha -->
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-calendar" style="color: #666;"></i>
                                    <input type="date" id="ventas-fecha-inicio"
                                        style="padding: 10px 12px; font-size: 14px; border: 1px solid #ddd; border-radius: 6px; background: white;">
                                    <span style="color: #666;">→</span>
                                    <input type="date" id="ventas-fecha-fin"
                                        style="padding: 10px 12px; font-size: 14px; border: 1px solid #ddd; border-radius: 6px; background: white;">
                                </div>

                                <!-- Separador visual -->
                                <div style="height: 35px; width: 1px; background: #dee2e6;"></div>

                                <!-- Botones de Acción -->
                                <div style="display: flex; gap: 10px;">
                                    <button type="button" class="btn-primary" id="ventas-btn-filtrar"
                                        style="padding: 10px 16px; font-size: 14px; white-space: nowrap;">
                                        <i class="fas fa-search"></i> Buscar
                                    </button>
                                    <button type="button" class="btn-outline" id="ventas-btn-limpiar-filtro"
                                        style="padding: 10px 16px; font-size: 14px; white-space: nowrap;">
                                        <i class="fas fa-eraser"></i> Limpiar
                                    </button>
                                    <button type="button" class="btn-primary" id="ventas-btn-exportar-pdf"
                                        style="padding: 10px 16px; font-size: 14px; white-space: nowrap;">
                                        <i class="fas fa-file-pdf"></i> PDF
                                    </button>
                                </div>
                            </div>
                            <!-- Mensaje de error para filtros -->
                            <div id="ventas-filtro-error" class="error-message"
                                style="margin-top: 10px; display: none;"></div>
                        </div>
                        <div class="table-container-venta">
                            <table class="data-table" id="tabla-ventas">
                                <thead>
                                    <tr>
                                        <th data-sort-by="fecha" class="sortable">Fecha <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="cliente.nombre" class="sortable">Cliente <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th>Producto</th>
                                        <th data-sort-by="total" class="sortable">Total <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th data-sort-by="vendedor.nombre" class="sortable">Vendedor <i
                                                class="sort-icon fas fa-sort"></i></th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="tabla-ventas-body">
                                </tbody>
                            </table>
                            <div class="pagination-controls" style="text-align: right; padding: 10px 0;">
                                <span id="ventas-page-info" style="margin-right: 15px;">Página 1 de 1</span>
                                <button class="btn-outline" id="ventas-prev-page" disabled>
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <button class="btn-outline" id="ventas-next-page">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal: Detalle de Venta -->
                <div id="venta-detail-modal" class="modal">
                    <div class="modal-content modal-large">
                        <span class="close-modal" onclick="cerrarModalDetalleVenta()">&times;</span>
                        <h3 style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-shopping-cart"></i> Detalle de Venta <span id="modal-venta-id"
                                style="color: #666; font-weight: 400; font-size: 18px;"></span>
                        </h3>

                        <div class="venta-detail-info" style="margin-bottom: 20px;">
                            <div class="info-grid"
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                                <div class="info-item">
                                    <strong style="color: #666; font-size: 13px;">Fecha:</strong>
                                    <p id="modal-venta-fecha" style="margin: 5px 0 0 0; font-size: 15px;"></p>
                                </div>
                                <div class="info-item">
                                    <strong style="color: #666; font-size: 13px;">Cliente:</strong>
                                    <p id="modal-venta-cliente" style="margin: 5px 0 0 0; font-size: 15px;"></p>
                                </div>
                                <div class="info-item">
                                    <strong style="color: #666; font-size: 13px;">Vendedor:</strong>
                                    <p id="modal-venta-vendedor" style="margin: 5px 0 0 0; font-size: 15px;"></p>
                                </div>
                                <div class="info-item">
                                    <strong style="color: #666; font-size: 13px;">Total:</strong>
                                    <p id="modal-venta-total"
                                        style="margin: 5px 0 0 0; font-size: 15px; font-weight: 600; color: #28a745;">
                                    </p>
                                </div>
                            </div>
                        </div>

                        <h4 style="margin-bottom: 15px; color: #333; font-size: 16px;">Productos Vendidos</h4>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Producto</th>
                                        <th>Cantidad</th>
                                        <th>Precio Unitario</th>
                                        <th>Subtotal</th>
                                    </tr>
                                </thead>
                                <tbody id="modal-venta-productos">
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="4">
                                            <div class="pagination-controls"
                                                style="text-align: right; padding: 10px 0;">
                                                <span id="modal-venta-page-info" style="margin-right: 15px;">Página 1 de
                                                    1</span>
                                                <button class="btn-outline" id="modal-venta-prev-page"
                                                    onclick="modalVentaPrevPage()" disabled>
                                                    <i class="fas fa-arrow-left"></i>
                                                </button>
                                                <button class="btn-outline" id="modal-venta-next-page"
                                                    onclick="modalVentaNextPage()" disabled>
                                                    <i class="fas fa-arrow-right"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="modal-add-cliente-overlay" class="modal">
                    <div class="modal-content modal-content-wide"> <button id="modal-add-cliente-close"
                            class="modal-close">&times;</button>

                        <header class="modal-header">
                            <h2>Crear Nuevo Cliente</h2>
                        </header>

                        <form id="add-cliente-form" class="modal-form" novalidate>

                            <div class="form-message" id="form-general-message-add-cliente"></div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="addClienteNombre">Nombre</label>
                                    <input type="text" id="addClienteNombre">
                                    <span class="error-message" id="errorAddClienteNombre"></span>
                                </div>

                                <div class="form-group">
                                    <label for="addClienteApellido">Apellido</label>
                                    <input type="text" id="addClienteApellido">
                                    <span class="error-message" id="errorAddClienteApellido"></span>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="addClienteDNI">DNI</label>
                                    <input type="text" id="addClienteDNI">
                                    <span class="error-message" id="errorAddClienteDNI"></span>
                                </div>

                                <div class="form-group">
                                    <label for="addClienteTelefono">Teléfono</label>
                                    <input type="tel" id="addClienteTelefono">
                                    <span class="error-message" id="errorAddClienteTelefono"></span>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="addClienteDireccion">Dirección</label>
                                    <input type="text" id="addClienteDireccion" placeholder="Calle, número, ciudad">
                                    <span class="error-message" id="errorAddClienteDireccion"></span>
                                </div>

                                <div class="form-group">
                                    <label for="addClienteEmail">Email</label>
                                    <input type="email" id="addClienteEmail" placeholder="ejemplo@mail.com">
                                    <span class="error-message" id="errorAddClienteEmail"></span>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <button type="submit" class="btn btn-primary">Guardar Cliente</button>
                            </div>
                        </form>
                    </div>
                </div>

            </section>



            <section id="informes-section" class="spa-section" style="display:none">


                <!-- Título de Sección -->
                <div class="informes-titulo">
                    <h2><i class="fas fa-chart-bar"></i> Informe y Estadísticas</h2>
                </div>

                <!-- BARRA DE FILTROS Y ACCIONES -->
                <div class="informes-filtros">
                    <div class="filtros-grupo">
                        <div class="filtros-fecha">
                            <div class="fecha-input-group">
                                <label><i class="fas fa-calendar-alt"></i> Desde</label>
                                <input type="date" id="fecha-inicio">
                            </div>
                            <div class="fecha-input-group">
                                <label><i class="fas fa-calendar-alt"></i> Hasta</label>
                                <input type="date" id="fecha-fin">
                            </div>
                        </div>
                        <div class="filtros-acciones">
                            <button type="button" class="btn-primary" id="buscar-filtros">
                                <i class="fas fa-search"></i> Buscar
                            </button>
                            <button type="button" class="btn-outline" id="limpiar-filtros">
                                <i class="fas fa-eraser"></i> Limpiar
                            </button>
                            <button type="button" class="btn-secondary" id="exportar-pdf">
                                <i class="fas fa-file-pdf"></i> Exportar PDF
                            </button>
                        </div>
                    </div>

                    <!-- Indicador de período -->
                    <div class="periodo-indicator">
                        <i class="fas fa-info-circle"></i>
                        <span id="periodo-texto">Cargando...</span>
                    </div>
                </div>

                <!-- CONTENEDOR PRINCIPAL DEL DASHBOARD -->
                <div id="dashboard-informes" class="informes-content">

                    <!-- KPIs DESTACADOS -->
                    <div class="informes-kpis">
                        <div class="kpi-card kpi-ventas">
                            <div class="kpi-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="kpi-content">
                                <h4>Ventas</h4>
                                <p class="kpi-value" id="kpi-ventas">$0</p>
                                <span class="kpi-label">Total del período</span>
                            </div>
                        </div>

                        <div class="kpi-card kpi-compras">
                            <div class="kpi-icon">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="kpi-content">
                                <h4>Compras</h4>
                                <p class="kpi-value" id="kpi-compras">$0</p>
                                <span class="kpi-label">Total del período</span>
                            </div>
                        </div>

                        <div class="kpi-card kpi-ganancia">
                            <div class="kpi-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="kpi-content">
                                <h4>Ganancia</h4>
                                <p class="kpi-value" id="kpi-ganancia">$0</p>
                                <span class="kpi-label">Ventas - Compras</span>
                            </div>
                        </div>

                        <div class="kpi-card kpi-stock">
                            <div class="kpi-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="kpi-content">
                                <h4>Stock Bajo</h4>
                                <p class="kpi-value" id="kpi-stock-bajo">0</p>
                                <span class="kpi-label">Productos requieren atención</span>
                            </div>
                        </div>
                    </div>

                    <!-- SECCIÓN DE GRÁFICOS PRINCIPALES -->
                    <div class="informes-charts-main">
                        <!-- Gráfico Principal: Ventas vs Compras -->
                        <div class="chart-principal">
                            <div class="chart-header">
                                <h3><i class="fas fa-chart-area"></i> Ventas vs Compras por Día</h3>
                            </div>
                            <div class="chart-body">
                                <canvas id="ventas-compras-chart"></canvas>
                            </div>
                        </div>

                        <!-- Gráfico Lateral: Estado del Stock -->
                        <div class="chart-lateral">
                            <div class="chart-header">
                                <h3><i class="fas fa-chart-pie"></i> Estado del Stock</h3>
                            </div>
                            <div class="chart-body">
                                <canvas id="estado-stock-chart"></canvas>
                            </div>
                            <div id="stock-leyenda" class="chart-legend"></div>
                        </div>
                    </div>

                    <!-- SECCIÓN DE DETALLES: TOP PRODUCTOS -->
                    <div class="informes-details">
                        <div class="detail-panel">
                            <div class="panel-header">
                                <h3><i class="fas fa-trophy"></i> Top 5 Productos Más Vendidos</h3>
                            </div>
                            <div class="panel-body">
                                <div class="top-productos-container">
                                    <table class="top-productos-table" id="top-productos-table">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Producto</th>
                                                <th>Cantidad</th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>
                                        <tbody id="top-productos-body">
                                            <tr>
                                                <td colspan="4" style="text-align: center; padding: 20px; color: #999;">
                                                    Cargando datos...
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </section>

            <!-- Sección: Gestión de Categorías -->
            <section id="categorias-section" class="spa-section" style="display:none">
                <div class="section-header">
                    <h2>Gestión de Categorías</h2>
                    <p>Administra las categorías de productos.</p>
                </div>

                <!-- Subsección: Crear Categoría -->
                <div id="categorias-create-container" class="subsection-container" style="display: none;">
                    <div class="form-section">
                        <h4>Crear Nueva Categoría</h4>
                        <form class="product-form" id="categoria-form">
                            <div class="form-group">
                                <label for="categoria-nombre">Nombre de la Categoría</label>
                                <input type="text" id="categoria-nombre"
                                    placeholder="Ej: Electrónica, Ropa, Alimentos...">
                                <div class="error-message" id="error-categoria-nombre"></div>
                            </div>

                            <button type="submit" class="btn-primary">
                                <i class="fas fa-plus"></i>
                                Crear Categoría
                            </button>
                        </form>
                        <p id="form-general-message-categoria" class="form-message"></p>
                    </div>
                </div>

                <!-- Subsección: Ver Categorías -->
                <div id="categorias-list-container" class="subsection-container">

                    <div class="search-section">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Buscar categoría por nombre..."
                                id="categorias-search-input">
                        </div>
                    </div>

                    <div class="table-section">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-sort-by="nombre">
                                            Nombre <i class="sort-icon fas fa-sort"></i>
                                        </th>
                                        <th>Productos Asociados</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="categorias-table-body">
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="3">
                                            <div class="pagination-controls"
                                                style="text-align: right; padding: 10px 0;">
                                                <span id="categorias-page-info" style="margin-right: 15px;">Página 1 de
                                                    1</span>
                                                <button class="btn-outline" id="categorias-prev-page" disabled>
                                                    <i class="fas fa-arrow-left"></i>
                                                </button>
                                                <button class="btn-outline" id="categorias-next-page">
                                                    <i class="fas fa-arrow-right"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Modal: Editar Categoría -->
            <div class="modal" id="edit-categoria-modal" style="display: none;">
                <div class="modal-content modal-compact">
                    <div class="modal-header">
                        <h3><i class="fas fa-edit"></i> Editar Categoría</h3>
                        <button class="modal-close" id="edit-categoria-modal-close-btn">&times;</button>
                    </div>

                    <form id="edit-categoria-form">
                        <input type="hidden" id="edit-categoria-id">

                        <div class="form-group">
                            <label for="edit-categoria-nombre">Nombre de la Categoría</label>
                            <input type="text" id="edit-categoria-nombre">
                            <div class="error-message" id="error-edit-categoria-nombre"></div>
                        </div>

                        <p id="edit-categoria-form-general-message" class="form-message"></p>

                        <div class="modal-buttons">
                            <button type="submit" class="btn-primary">Guardar Cambios</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Modal: Confirmar Eliminación de Categoría -->
            <div class="modal" id="delete-categoria-confirm-modal" style="display: none;">
                <div class="modal-content" style="max-width: 400px; text-align: center;">
                    <h3>Confirmar Eliminación</h3>
                    <p id="delete-categoria-modal-message">¿Estás seguro de que querés eliminar esta categoría?</p>

                    <div class="modal-buttons" style="justify-content: center;">
                        <button type="button" class="btn-outline" id="cancel-delete-categoria-btn">
                            Cancelar
                        </button>
                        <button type="button" class="btn-danger" id="confirm-delete-categoria-btn">
                            Eliminar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal: Ver Productos de Categoría -->
            <div class="modal" id="productos-categoria-modal" style="display: none;">
                <div class="modal-content modal-large">
                    <div class="modal-header">
                        <h3><i class="fas fa-box"></i> Productos de <span id="categoria-nombre-modal"></span></h3>
                        <button class="modal-close" id="productos-categoria-modal-close">&times;</button>
                    </div>

                    <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th>Descripción</th>
                                    <th>Precio</th>
                                    <th>Stock</th>
                                </tr>
                            </thead>
                            <tbody id="productos-categoria-body">
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="4">
                                        <div class="pagination-controls" style="text-align: right; padding: 10px 0;">
                                            <span id="productos-page-info" style="margin-right: 15px;">Página 1 de
                                                1</span>
                                            <button class="btn-outline" id="productos-prev-page" disabled>
                                                <i class="fas fa-arrow-left"></i>
                                            </button>
                                            <button class="btn-outline" id="productos-next-page">
                                                <i class="fas fa-arrow-right"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <section id="stock-section" class="spa-section" style="display:none">

                <div class="section-header">
                    <h3>Gestión de Stock</h3>
                    <p>Consultá y administrá el inventario de tus productos.</p>
                </div>

                <div class="search-section">
                    <div class="search-box">
                        <i class="fas fa-search"></i>

                        <input type="text" placeholder="Buscar productos por nombre..." id="stock-search-input">
                    </div>
                </div>

                <div class="table-section">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th data-sort-by="nombre">
                                        Nombre <i class="sort-icon fas fa-sort"></i>
                                    </th>

                                    <th data-sort-by="categoria">
                                        Categoría <i class="sort-icon fas fa-sort"></i>
                                    </th>

                                    <th>Descripción</th>

                                    <th data-sort-by="precio">
                                        Precio <i class="sort-icon fas fa-sort"></i>
                                    </th>

                                    <th data-sort-by="stock">
                                        Stock <i class="sort-icon fas fa-sort"></i>
                                    </th>

                                    <th>Acciones</th>
                                </tr>
                            </thead>

                            <tbody id="stock-table-body">
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="6">
                                        <div class="pagination-controls" style="text-align: right; padding: 10px 0;">
                                            <span id="page-info" style="margin-right: 15px;">Página 1 de 1</span>
                                            <button class="btn-outline" id="prev-page" disabled>
                                                <i class="fas fa-arrow-left"></i>
                                            </button>
                                            <button class="btn-outline" id="next-page">
                                                <i class="fas fa-arrow-right"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>



            </section>





        </main>
    </div>

    <div id="logout-modal" class="modal">
        <div class="modal-content modal-compact">
            <h3>Confirmar Salida</h3>
            <p>¿Estás seguro de que deseas cerrar sesión?</p>
            <div class="modal-buttons" style="justify-content: center;">
                <button id="confirm-logout" class="btn-danger">Sí, Salir</button>
                <button id="cancel-logout" class="btn-outline">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="modal-edit-proveedor-overlay" class="modal">

        <div class="modal-content">

            <button id="modal-edit-proveedor-close" class="modal-close">&times;</button>

            <h2>Editar Proveedor</h2>

            <form id="edit-proveedor-form" class="form-container">
                <input type="hidden" id="editProveedorId">

                <div class="form-group">
                    <label for="editProveedorNombre">Nombre:</label>
                    <input type="text" id="editProveedorNombre" class="form-control">
                    <div class="error-message" id="errorEditNombre"></div>
                </div>

                <div class="form-group">
                    <label for="editProveedorTelefono">Teléfono:</label>
                    <input type="text" id="editProveedorTelefono" class="form-control">
                    <div class="error-message" id="errorEditTelefono"></div>
                </div>

                <div class="form-group">
                    <label for="editProveedorEmail">Email:</label>
                    <input type="email" id="editProveedorEmail" class="form-control">
                    <div class="error-message" id="errorEditEmail"></div>
                </div>

                <div class="form-group">
                    <label for="editProveedorDireccion">Dirección:</label>
                    <input type="text" id="editProveedorDireccion" class="form-control">
                    <div class="error-message" id="errorEditDireccion"></div>
                </div>

                <div class="form-group">
                    <label for="edit-productos-select-input">Productos que provee:</label>
                    <div class="custom-multi-select-container" id="edit-productos-multi-select-container">
                        <div class="tags-container" id="edit-tags-container"></div>
                        <input type="text" id="edit-productos-select-input" class="custom-select-input"
                            placeholder="Buscar productos...">
                    </div>
                    <select id="editProveedorProductosSelect" multiple hidden></select>
                    <div class="options-container" id="edit-productos-options-container"></div>
                    <div class="error-message" id="editProveedorProductosError"></div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                </div>
                <div id="form-general-message-edit-proveedor" class="form-message"></div>
            </form>
        </div>
    </div>

    <div class="modal" id="delete-confirm-modal" style="display: none; padding-top: 15vh;">
        <div class="modal-content" style="max-width: 400px; text-align: center;">

            <h3>Confirmar Eliminación</h3>

            <p id="delete-modal-message">¿Estás seguro de que querés borrar este producto?</p>

            <div class="modal-buttons" style="justify-content: center;">
                <button type="button" class="btn-outline" id="cancel-delete-btn">
                    Cerrar
                </button>
                <button type="button" class="btn-danger" id="confirm-delete-btn">
                    Aceptar
                </button>
            </div>

        </div>
    </div>


    <div class="modal" id="modal-edit-usuario-overlay" style="display:none;">
        <div class="modal-content" style="max-width: 600px;">
            <button id="modal-edit-usuario-close" class="modal-close">&times;</button>
            <h2>Editar Usuario</h2>

            <form id="edit-usuario-form" class="form-container">
                <input type="hidden" id="editUsuarioId">

                <div class="form-row">
                    <div class="form-group">
                        <label for="editUsuarioNombre">Nombre:</label>
                        <input type="text" id="editUsuarioNombre" class="form-control">
                        <div class="error-message" id="errorEditUsuarioNombre"></div>
                    </div>
                    <div class="form-group">
                        <label for="editUsuarioApellido">Apellido:</label>
                        <input type="text" id="editUsuarioApellido" class="form-control">
                        <div class="error-message" id="errorEditUsuarioApellido"></div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editUsuarioEmail">Email:</label>
                        <input type="email" id="editUsuarioEmail" class="form-control">
                        <div class="error-message" id="errorEditUsuarioEmail"></div>
                    </div>
                    <div class="form-group">
                        <label for="editUsuarioRol">Rol:</label>
                        <select id="editUsuarioRol" class="form-control">
                        </select>
                        <div class="error-message" id="errorEditUsuarioRol"></div>
                    </div>
                </div>



                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                </div>
                <div id="form-general-message-edit-usuario" class="form-message"></div>
            </form>
        </div>
    </div>


    <!-- Modal de Detalle de Compra -->
    <div id="purchase-detail-modal" class="modal">
        <div class="modal-content modal-large">
            <span class="close-modal" onclick="cerrarModalDetalleCompra()">&times;</span>
            <h3 style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-receipt"></i> Detalle de Compra <span id="modal-compra-id"
                    style="color: #666; font-weight: 400; font-size: 18px;"></span>
            </h3>

            <div class="purchase-detail-info" style="margin-bottom: 20px;">
                <div class="info-grid"
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <div class="info-item">
                        <strong style="color: #666; font-size: 13px;">Fecha:</strong>
                        <p id="modal-compra-fecha" style="margin: 5px 0 0 0; font-size: 15px;"></p>
                    </div>
                    <div class="info-item">
                        <strong style="color: #666; font-size: 13px;">Proveedor:</strong>
                        <p id="modal-compra-proveedor" style="margin: 5px 0 0 0; font-size: 15px;"></p>
                    </div>
                    <div class="info-item">
                        <strong style="color: #666; font-size: 13px;">Total:</strong>
                        <p id="modal-compra-total"
                            style="margin: 5px 0 0 0; font-size: 15px; font-weight: 600; color: #28a745;"></p>
                    </div>
                </div>
            </div>

            <h4 style="margin-bottom: 15px; color: #333; font-size: 16px;">Productos Comprados</h4>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Cantidad</th>
                            <th>Precio Unitario</th>
                            <th>Subtotal</th>
                        </tr>
                    </thead>
                    <tbody id="modal-compra-productos">
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="4">
                                <div class="pagination-controls" style="text-align: right; padding: 10px 0;">
                                    <span id="modal-compra-page-info" style="margin-right: 15px;">Página 1 de 1</span>
                                    <button class="btn-outline" id="modal-compra-prev-page" disabled>
                                        <i class="fas fa-arrow-left"></i>
                                    </button>
                                    <button class="btn-outline" id="modal-compra-next-page" disabled>
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <div class="modal-buttons" style="margin-top: 20px; justify-content: flex-end;">
                <button onclick="cerrarModalDetalleCompra()" class="btn-secondary">Cerrar</button>
            </div>
        </div>
    </div>

    <div id="confirmation-modal" class="modal">
        <div class="modal-content modal-compact">
            <span class="close-modal">&times;</span>
            <h3 id="confirmation-message" style="margin-top: 10px; margin-bottom: 20px; font-size: 18px;">
                ¿Estás seguro?
            </h3>

            <div class="modal-buttons">
                <button id="btn-confirm-cancel" class="btn-secondary">Cancelar</button>
                <button id="btn-confirm-yes" class="btn-primary">Confirmar</button>
            </div>
        </div>
    </div>


    <!-- Modal: Crear Nueva Categoría -->
    <div id="modal-add-categoria-overlay" class="modal">
        <div class="modal-content modal-compact">
            <button id="modal-add-categoria-close" class="modal-close">&times;</button>

            <header class="modal-header">
                <h2>Crear Nueva Categoría</h2>
            </header>

            <form id="add-categoria-form" class="modal-form" novalidate>
                <div class="form-group">
                    <label for="addCategoriaNombre">Nombre de la Categoría</label>
                    <input type="text" id="addCategoriaNombre" placeholder="Ej: Útiles, Electrónica, Ropa..." required>
                    <span class="error-message" id="errorAddCategoriaNombre"></span>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Guardar Categoría</button>
                </div>
            </form>
            <div id="form-general-message-add-categoria" class="form-message"></div>
        </div>
    </div>

    <script src="js/admin.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/principal.js"></script>
    <script src="js/productos.js"></script>
    <script src="js/proveedor.js"></script>
    <script src="js/compras.js"></script>
    <script src="js/usuarios.js"></script>
    <script src="js/ventas.js"></script>
    <script src="js/informes.js"></script>
    <script src="js/stock.js"></script>
    <script src="js/categorias.js"></script>


</body>

</html>